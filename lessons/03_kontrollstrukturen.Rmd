---
title: "Wissenschaftliches Programmieren mit R"
subtitle: "Kontrollstrukturen"
author: "Andreas Blaette"
date: "14. Mai 2020"
output: 
  xaringan::moon_reader:
    css: [default, metropolis, robot-fonts, './css/polminify.css']
    nature:
      countIncrementalSlides: false
editor_options:
  chunk_output_type: console
---

# Kontrollstrukturen: if-else 

```{r eval=TRUE}
schokolade <- c("milka", "lindt", "ritter-sport", "alpia", "schogetten")
schokolade == "alpia"
if (schokolade[5] != "alpia"){
  print("her mit dem zeug")
} else {
  print("bleib mir weg damit")
}

```


---

# Kontrollstrukturen:  for-Schleifen

- einfaches Iterieren durch einen numerischen Vektor

```{r eval = FALSE}
for (i in c(1,2,3,4,5)){
  print(i)
}
```

- sehr oft macht man das so: Iteration durch eine Zahlenreihe

```{r, eval = FALSE}
for (i in c(1:5)){ print(i) }
```

- man kann auch durch einen character vector iterieren

```{r, eval = FALSE}
for (i in c("a", "b", "c")){ print(i) }
```

- und dabei kann natürlich der Vektor schon früher definiert worden sein

```{r, eval = FALSE}
for (schoki in schokolade) print(schoki)
```

---

# Verknüpfung von Kontrollstrukturen 

Hier ein ganz einfaches Szenario, das man aber in der Praxis oft
nutzen kann: Iteration durch einen Vektor und Durchführung einer
Anweisung, wenn eine bestimmte Bedingung erfüllt ist.

```{r}
for (schoki in schokolade){
  if (schoki == "alpia"){
    print("großer jubel")
  } else {
    print("weg damit!!!!")
  }  
}
```


---

# Definition von Funktionen

```{r}
add_one <- function(x){
  x + 1
}
add_one(1)
```

```{r}
add_two <- function(x){
  x + 2
}
add_two(5)
```

```{r}
add_anything <- function(x, y){
  x + y
}
add_anything(5, 5)
```

---

# Funktionen II

```{r}
add_anything_default <- function(x, y = 2){
  x + y
}
add_anything_default(x = 5)
add_anything_default(x = 5, 3)
add_anything_default(x = 5, y = 6)
```

---

# Corona in Duisburg

Warum es gut ist, Funktionen zu verstehen ... Ein kleines Szenario:

```{r}
read.table("https://opendata-duisburg.de/sites/default/files/Corona%2030.04.2020.csv")
```

Was muss man tun, um eine ordentliche Tabelle zu importieren?

---

# Anonyme Funktionen und lapply, sapply

```{r}
lapply(1:5, function(x){x + 1})
```

---

# sapply

```{r}
x <- sapply(
  LETTERS[1:5], 
  function(x){
    x_augmented <- paste("-", x, "-", collapse = " ")
    print(x_augmented)
  }
)
```